<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Slider with vanilla javascript</title>
</head>
<style>

   body {
      margin: 0;
      padding: 0;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva,Verdana, sans-serif;
      text-align: center;
      }
   button {
      margin: 10px 5px;
      padding: 10px;
      background-color:steelblue;
      color: rgb(228, 224, 224);
      border: 1px solid transparent;
      border-radius: 5px;
      font-size: 1rem;
   }
   #target {
     padding: 1.5em;
     margin: 1.5em;
     background-color: #eee;
   }

</style>
<body>
   <h1>Create jQuery slideToggle in Vanilla (pure) Javascript</h1>
   <div id="target">Testing JavaScript slideToggle</div>
   <button id="trigger">slideToggle</button>
   <script>
//        It is pretty obvious that we need a function bring about the effect. Also, we will need a   target and a element to trigger the effect. Also we need animation speed!
// So, we almost know the parameters needed to be supplied to our slideToggle function. Let’s break down our problem into three different blocks:

// slide-up
// slide-down
// slide-toggle
  /*  
  let slideUp = (target, duration) => {
    ...Sliding-up logic 
   }

   let slideDown = (target, duration) => {
    ...Sliding-down logic 
   }

   let slideToggle = (target, duration) => {
    ... Slide-toggle logic 
   }
   */
// for simplicity reason we keep the trigger independent from the scope of the above functions
let slideUp = (target, duration=500) => {
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.boxSizing = 'border-box';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
 
    // Add the CSS transition-property to our target. 
    // 1.Apply it to the height, margin, and padding properties of the target.
    // 2. Then add the CSS transition-duration property to our target. This takes the duration argument we supply in the slideUP function.
   // 3.Make the element contain the padding and border (box-sizing:border-box)
   // 4.Get the net height of the target and...
   // 5. Use it to set the CSS height attribute

   //Now, the slideUp function should make the target element switch its state to hidden. Let’s zero down a bunch of CSS properties for that matter.
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
   // 6. Set the overflow property to hidden
   // 7. Zero down the CSS height for the target
   // 8. Zero down the vertical padding i.e padding-top and padding-bottom if any
   // 9. Zero down the vertical marging i.e margin-top and margin-bottom if any  

   // Finally remove all the additional properties after the animation completes. This can be easily accomplished with the help of setTimeout function.
    window.setTimeout( () => {
      target.style.display = 'none';
      target.style.removeProperty('height');
      target.style.removeProperty('padding-top');
      target.style.removeProperty('padding-bottom');
      target.style.removeProperty('margin-top');
      target.style.removeProperty('margin-bottom');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      //alert("!");
    }, duration);
  }

  let slideDown = (target, duration=500) => {
    target.style.removeProperty('display');
    let display = window.getComputedStyle(target).display;

    if (display === 'none')
      display = 'block';

    target.style.display = display;
    let height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.boxSizing = 'border-box';
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    window.setTimeout( () => {
      target.style.removeProperty('height');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
    }, duration);
  }
  let slideToggle = (target, duration = 500) => {
    if (window.getComputedStyle(target).display === 'none') {
      return slideDown(target, duration);
    } else {
      return slideUp(target, duration);
    }
  }
//Animation trigger 
  document.getElementById("trigger").addEventListener('click', function() {
       slideToggle(document.getElementById("target"), 200);
});
   </script>
</body>
</html>
